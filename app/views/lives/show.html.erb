<% provide :title, @live.title %>
<article>
  <header class="page-header">
    <h2>
      <%= @live.name %>
      <small><%= "#{I18n.l(@live.date)} @#{@live.place}" %></small>
    </h2>
  </header>
  <% if @songs.count > 20 %>
    <div class="table-responsive">
      <table class="table table-striped table-condensed">
        <thead>
          <tr>
            <th>#</th>
            <th>Song</th>
            <th>Artist</th>
            <th>Members</th>
            <% if logged_in? %>
              <th></th>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <%= render @songs, show_live: false %>
        </tbody>
      </table>
    </div>
  <% else %>
    <ol id="set-list">
      <% @songs.each do |song| %>
        <li>
          <%= logged_in? ? link_to(song.name, song) : song.name %>
          <%= "/ #{song.artist}" %>
          <% if logged_in? && (current_user.admin_or_elder? || current_user.played?(@song)) %>
            <small><%= link_to glyphicon(:edit), edit_song_path(song) %></small>
          <% end %>
          <ul class="list-inline">
            <%= render song.playings %>
          </ul>
        </li>
      <% end %>
    </ol>
  <% end %>
  <% if logged_in? && current_user.admin_or_elder? %>
    <footer>
      <ul class="list-inline">
        <li><%= link_to glyphicon("plus-sign") + "Add song", new_song_path(live_id: @live.id),
          class: "btn btn-default", role: "button" %></li>
        <li><%= link_to glyphicon(:edit) + "Edit", edit_life_path(@live), class: "btn btn-primary", role: "button" %></li>
        <% if @songs.empty? %>
          <li><%= link_to glyphicon(:trash) + "Delete", @live, method: :delete,
            class: "btn btn-danger", role: "button" %></li>
        <% end %>
      </ul>
    </footer>
  <% end %>
</article>
